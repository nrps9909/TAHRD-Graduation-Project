# 移動系統優化說明

## 優化內容 (2024)

### 1. 修正了移動方向映射
- **A/D 鍵位映射**：修正為符合主流遊戲習慣
  - A鍵（左）：`direction.current.x = -1`
  - D鍵（右）：`direction.current.x = 1`
- **右向量修正**：從 `(-1, 0, 0)` 改為 `(1, 0, 0)`

### 2. 優化了角色朝向邏輯
- **Pointer Lock 模式**：角色朝向跟隨相機旋轉，提供更好的第一人稱體驗
- **標準模式**：角色面向移動方向，保持原有的第三人稱控制感

### 3. 改進了相機控制
- **滑鼠移動方向**：調整為符合 FPS 遊戲習慣（滑鼠右移，視角左轉）
- **俯仰角影響**：增加到 0.5，讓上下視角變化更明顯
- **相機高度調整**：增加俯仰對相機高度的影響係數

### 4. 移動速度調整
- 基礎步行速度：8（原 6）
- 跑步速度：16（原 15）
- 潛行速度：4（原 3）

## 控制方式

### Pointer Lock 模式（類 Minecraft）
- **進入方式**：移動滑鼠自動進入
- **移動**：WASD 基於視角方向
- **視角**：滑鼠控制，360度水平旋轉，上下 60 度限制
- **角色朝向**：跟隨相機旋轉
- **退出**：按 ESC

### 標準模式
- **移動**：WASD 基於世界座標
- **視角**：滑鼠拖曳控制相機環繞
- **角色朝向**：面向移動方向

## 技術細節

### 座標系統
- Three.js 使用右手座標系
- X軸：正方向為右
- Y軸：正方向為上
- Z軸：正方向為螢幕外（向後）

### 關鍵參數
```typescript
// 滑鼠靈敏度
const sensitivity = 0.002

// 相機平滑度
smoothness = 8

// 俯仰角限制
Math.max(-Math.PI / 3, Math.min(Math.PI / 3, pitch))  // -60° 到 +60°
```

## 後續優化建議
1. 添加靈敏度設定選項
2. 實現慣性移動（停止時的滑行效果）
3. 添加跳躍功能
4. 優化碰撞檢測的反饋