# 🎨 岛屿创建器使用指南

## 功能概述

岛屿创建器允许玩家自己绘制岛屿的形状，系统会自动将 2D 绘图转换为 3D 岛屿模型。

## 访问方式

```
http://localhost:3000/island-creator
```

## 使用步骤

### 1. 开始绘制
点击右上角的 **"🎨 开始绘制"** 按钮

### 2. 绘制岛屿轮廓
- 在画布上**点击并拖动**来绘制岛屿形状
- 粉色十字线是中心参考点
- 网格可以帮助你控制形状

### 3. 闭合形状
两种方式闭合你的岛屿形状：
- **点击起点**（会出现绿色圆圈提示）
- 或点击 **"完成绘制"** 按钮

### 4. 实时预览
绘制完成后，系统会立即生成 3D 岛屿：
- 使用**鼠标左键拖动**旋转视角
- 使用**滚轮**缩放视图
- 使用**鼠标右键拖动**平移视图

### 5. 自定义颜色
使用顶部的颜色选择器选择你喜欢的岛屿颜色

## 技术实现

### 组件架构

```
IslandCreator (页面)
  ├── IslandDrawer (2D绘图界面)
  └── CustomIsland (3D岛屿组件)
```

### 核心文件

- `src/components/IslandDrawer.tsx` - Canvas 绘图界面
- `src/components/3D/CustomIsland.tsx` - 自定义形状的 3D 岛屿
- `src/pages/IslandCreator/index.tsx` - 主页面

### 转换流程

```
1. 玩家在 Canvas 上绘制 → 捕获点坐标
2. 归一化坐标 (0-1 范围) → 转换为 Three.js 坐标系
3. 使用 THREE.Shape 创建 2D 形状
4. 使用 ExtrudeGeometry 挤出为 3D 几何体
5. 添加材质、光照和阴影效果
```

## 技术特性

### 1. 智能边界检测
- 自动检测起点闭合
- 最少需要 4 个点才能生成岛屿

### 2. 三层立体结构
- **底部基座**：米色，提供稳定感
- **主体层**：用户自定义颜色
- **顶部平台**：浅色，作为种树区域

### 3. 实时渲染
- 使用 Three.js + React Three Fiber
- 支持阴影和光照效果
- 环境天空盒营造氛围

## 扩展功能建议

### 未来可以添加：
1. **保存/加载功能** - 保存绘制的岛屿到数据库
2. **预设形状库** - 提供常见形状模板
3. **细节调整** - 调整岛屿高度、斜率等
4. **纹理自定义** - 添加草地、沙滩等纹理
5. **导出功能** - 导出为 GLB/OBJ 格式

## 示例代码

### 在其他页面使用自定义岛屿：

```tsx
import { CustomIsland } from '@/components/3D/CustomIsland'

// 心形岛屿示例
const heartShape = [
  { x: 0, y: 0.5 },
  { x: -0.5, y: 0.2 },
  { x: -0.7, y: -0.3 },
  { x: 0, y: -0.8 },
  { x: 0.7, y: -0.3 },
  { x: 0.5, y: 0.2 },
]

<CustomIsland
  position={[0, 0, 0]}
  color="#FF69B4"
  shapePoints={heartShape}
  memories={memories}
/>
```

## 常见问题

### Q: 岛屿太小/太大？
A: 在 `CustomIsland.tsx` 中调整 `scaleFactor` 变量（默认 20）

### Q: 如何调整岛屿厚度？
A: 修改 `extrudeSettings.depth` 参数（默认 2）

### Q: 可以保存绘制的岛屿吗？
A: 目前是纯前端功能，可以扩展保存到后端数据库

## 性能优化

- ExtrudeGeometry 会根据点的数量自动优化
- 建议绘制点数在 20-100 之间
- 过多的点可能影响渲染性能

---

**享受创作你的专属岛屿吧！** 🏝️✨
