<!DOCTYPE html>
<html>
<head>
    <title>模型狀態檢查</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #f0f0f0; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: white; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>🎮 Kenney 模型載入狀態</h1>
    <p><strong>測試時間:</strong> <span id="timestamp"></span></p>
    
    <h2>📂 檔案檢查結果</h2>
    <div id="file-status">檢查中...</div>
    
    <h2>🌐 HTTP 存取測試</h2>
    <div id="http-status">測試中...</div>
    
    <h2>🔗 當前使用路徑</h2>
    <pre>
NPC 模型載入:
- NPC-1: /characters/CHAR-M-A/CHAR-M-A.glb
- NPC-2: /characters/CHAR-F-B/CHAR-F-B.glb  
- NPC-3: /characters/CHAR-M-C/CHAR-M-C.glb

玩家模型載入:
- Player: /characters/CHAR-M-D/CHAR-M-D.glb

備用路徑 (原始):
- /kenney_mini-characters/Models/GLB format/*.glb
    </pre>
    
    <h2>🎯 問題排除</h2>
    <div id="troubleshoot">
        <p class="info">如果模型還是看不到，可能的原因：</p>
        <ul>
            <li>🔍 檢查瀏覽器開發者工具 Console 是否有錯誤</li>
            <li>📱 嘗試重新整理頁面 (Ctrl+F5)</li>
            <li>🌐 確認 localhost:3001 可正常存取</li>
            <li>⚡ 檢查 Suspense 載入是否正常</li>
        </ul>
        
        <p><strong>立即測試連結:</strong></p>
        <ul>
            <li><a href="http://localhost:3001" target="_blank">🎮 主遊戲頁面</a></li>
            <li><a href="/test-glb-loading.html" target="_blank">🧪 GLB 載入測試</a></li>
        </ul>
    </div>
    
    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString('zh-TW');
        
        // 測試檔案路徑
        const paths = [
            '/characters/CHAR-M-A/CHAR-M-A.glb',
            '/characters/CHAR-F-B/CHAR-F-B.glb', 
            '/characters/CHAR-M-C/CHAR-M-C.glb',
            '/characters/CHAR-M-D/CHAR-M-D.glb'
        ];
        
        const fileStatus = document.getElementById('file-status');
        const httpStatus = document.getElementById('http-status');
        
        fileStatus.innerHTML = '<p>檢查必要的 GLB 檔案:</p>';
        httpStatus.innerHTML = '<p>測試 HTTP 存取:</p>';
        
        let fileResults = [];
        let httpResults = [];
        
        paths.forEach((path, index) => {
            fetch(path)
                .then(response => {
                    const status = response.ok ? 'success' : 'error';
                    const message = response.ok ? '✅ 可存取' : `❌ ${response.status} ${response.statusText}`;
                    
                    fileResults[index] = `<div class="${status}">${path}: ${message}</div>`;
                    httpResults[index] = `<div class="${status}">${path}: ${message} (${response.headers.get('content-type')})</div>`;
                    
                    if (fileResults.filter(r => r).length === paths.length) {
                        fileStatus.innerHTML = '<p>GLB 檔案狀態:</p>' + fileResults.join('');
                    }
                    
                    if (httpResults.filter(r => r).length === paths.length) {
                        httpStatus.innerHTML = '<p>HTTP 存取測試:</p>' + httpResults.join('');
                    }
                })
                .catch(error => {
                    fileResults[index] = `<div class="error">${path}: ❌ 載入失敗 - ${error.message}</div>`;
                    httpResults[index] = `<div class="error">${path}: ❌ 網路錯誤 - ${error.message}</div>`;
                    
                    if (fileResults.filter(r => r).length === paths.length) {
                        fileStatus.innerHTML = '<p>GLB 檔案狀態:</p>' + fileResults.join('');
                    }
                    
                    if (httpResults.filter(r => r).length === paths.length) {
                        httpStatus.innerHTML = '<p>HTTP 存取測試:</p>' + httpResults.join('');
                    }
                });
        });
        
    </script>
</body>
</html>