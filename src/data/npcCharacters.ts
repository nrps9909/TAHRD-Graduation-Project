// Claude Code Adventure - NPC è§’è‰²å®šç¾©
// éŠæˆ²ä¸­çš„å°å¸«å’ŒåŠ©æ‰‹è§’è‰²

export interface NPCCharacter {
  id: string
  name: string
  title: string
  description: string
  avatar: string // emoji æˆ–åœ–ç‰‡è·¯å¾‘
  specialty: string
  personality: string
  greetings: string[]
  encouragements: string[]
  hints: string[]
  unlockCondition?: string // è§£é–æ¢ä»¶ï¼ˆå ´æ™¯ IDï¼‰
  color: string // ä¸»é¡Œé¡è‰²
}

export const npcCharacters: NPCCharacter[] = [
  {
    id: 'npc-code-cat',
    name: 'Code è²“å’ª',
    title: 'ä½ çš„ç¨‹å¼è¨­è¨ˆå¤¥ä¼´',
    description:
      'ä¸€éš»å‹å–„çš„è²“å’ªï¼Œæ˜¯ä½ åœ¨ Vibe Coding ä¸–ç•Œä¸­çš„ä¸»è¦å°è¦½è€…ã€‚å®ƒæœƒé™ªä¼´ä½ å®Œæˆæ¯ä¸€å€‹æŒ‘æˆ°ï¼',
    avatar: 'ğŸ±',
    specialty: 'åŸºç¤æ•™å­¸èˆ‡é¼“å‹µ',
    personality: 'å‹å–„ã€è€å¿ƒã€å……æ»¿æ´»åŠ›',
    greetings: [
      'å–µï½æ­¡è¿ä¾†åˆ° Vibe Coding çš„ä¸–ç•Œï¼',
      'å—¨ï¼æº–å‚™å¥½é–‹å§‹å†’éšªäº†å—ï¼Ÿå–µï½',
      'ä»Šå¤©æˆ‘å€‘è¦å­¸ç¿’ä»€éº¼æ–°æ±è¥¿å‘¢ï¼Ÿå–µå–µï¼',
      'æ­¡è¿å›ä¾†ï¼ç¹¼çºŒæˆ‘å€‘çš„å­¸ç¿’ä¹‹æ—…å§ï¼',
    ],
    encouragements: [
      'åšå¾—å¥½ï¼å–µï½ ä½ çœŸæ£’ï¼',
      'å¤ªå²å®³äº†ï¼ç¹¼çºŒä¿æŒï¼å–µï½',
      'å“‡ï¼ä½ å­¸å¾—çœŸå¿«ï¼å–µå–µï¼',
      'ä¸è¦æ”¾æ£„ï¼ä½ ä¸€å®šå¯ä»¥çš„ï¼å–µï½',
      'æ¯ä¸€æ­¥éƒ½æ˜¯é€²æ­¥ï¼å–µï½',
    ],
    hints: [
      'è©¦è‘—æŠŠå•é¡Œæè¿°å¾—æ›´å…·é«”ä¸€é»å–µï½',
      'å¦‚æœå¡ä½äº†ï¼Œå¯ä»¥å•æˆ‘ä»»ä½•å•é¡Œå–µï¼',
      'è¨˜å¾—ä¸€æ­¥ä¸€æ­¥ä¾†ï¼Œä¸è¦æ€¥å–µï½',
    ],
    unlockCondition: 'cc-1-3',
    color: 'bg-cat-pink',
  },
  {
    id: 'npc-prompt-master',
    name: 'Prompt å°å¸«',
    title: 'æç¤ºè©å·¥ç¨‹å¤§å¸«',
    description:
      'ä¸€ä½ç¥ç§˜çš„æ™ºè€…ï¼Œç²¾é€šèˆ‡ AI æºé€šçš„è—è¡“ã€‚å®ƒæœƒæ•™ä½ å¦‚ä½•å¯«å‡ºå®Œç¾çš„æç¤ºè©ï¼',
    avatar: 'ğŸ§™â€â™‚ï¸',
    specialty: 'æç¤ºè©å·¥ç¨‹',
    personality: 'æ™ºæ…§ã€ç¥ç§˜ã€å¯Œæœ‰æ´å¯ŸåŠ›',
    greetings: [
      'æ­¡è¿ï¼Œå¹´è¼•çš„å­¸å¾’ã€‚æˆ‘å°‡æ•™ä½ èˆ‡ AI å°è©±çš„è—è¡“ã€‚',
      'ä½ ä¾†äº†ã€‚ä»Šå¤©ï¼Œæˆ‘å€‘å°‡æ¢ç´¢æç¤ºè©çš„å¥§ç§˜ã€‚',
      'å¾ˆå¥½ï¼Œä½ å±•ç¾äº†å­¸ç¿’çš„æ¸´æœ›ã€‚è®“æˆ‘å€‘é–‹å§‹å§ã€‚',
    ],
    encouragements: [
      'ä½ çš„æç¤ºè©è¶Šä¾†è¶Šæœ‰æ·±åº¦äº†ã€‚',
      'å‡ºè‰²ï¼ä½ é–‹å§‹ç†è§£èˆ‡ AI æºé€šçš„ç²¾é«“ã€‚',
      'ç¹¼çºŒç²¾é€²ï¼Œä½ çµ‚å°‡æˆç‚ºå¤§å¸«ã€‚',
      'æ¯ä¸€æ¬¡ç·´ç¿’éƒ½åœ¨å¼·åŒ–ä½ çš„èƒ½åŠ›ã€‚',
    ],
    hints: [
      'å¥½çš„æç¤ºè©éœ€è¦ä¸‰è¦ç´ ï¼šæ¸…æ™°ã€å…·é«”ã€æœ‰çµæ§‹ã€‚',
      'è¨˜ä½ï¼ŒAI åªçŸ¥é“ä½ å‘Šè¨´å®ƒçš„ã€‚çµ¦äºˆè¶³å¤ çš„èƒŒæ™¯è³‡è¨Šã€‚',
      'å˜—è©¦ç”¨ä¸åŒæ–¹å¼æè¿°åŒä¸€å€‹éœ€æ±‚ï¼Œè§€å¯Ÿçµæœçš„å·®ç•°ã€‚',
      'æœ‰æ™‚å€™ï¼Œå±•ç¤ºç¯„ä¾‹æ¯”ç´”æ–‡å­—æè¿°æ›´æœ‰æ•ˆã€‚',
    ],
    unlockCondition: 'cc-2-3',
    color: 'bg-purple-600',
  },
  {
    id: 'npc-refactor-craftsman',
    name: 'Refactor å·¥åŒ ',
    title: 'ç¨‹å¼ç¢¼é‡æ§‹å°ˆå®¶',
    description:
      'ä¸€ä½ç¶“é©—è±å¯Œçš„å·¥åŒ ï¼Œå°ˆé–€å°‡é›œäº‚çš„ç¨‹å¼ç¢¼æ‰“é€ æˆè—è¡“å“ã€‚å®ƒæœƒæ•™ä½  Clean Code çš„ç²¾é«“ï¼',
    avatar: 'ğŸ‘¨â€ğŸ”§',
    specialty: 'ç¨‹å¼ç¢¼é‡æ§‹èˆ‡å„ªåŒ–',
    personality: 'åš´è¬¹ã€è¿½æ±‚å®Œç¾ã€å–„æ–¼åˆ†æ',
    greetings: [
      'æ­¡è¿ä¾†åˆ°æˆ‘çš„å·¥åŠã€‚è®“æˆ‘å€‘æŠŠç¨‹å¼ç¢¼æ‰“ç£¨å¾—é–ƒé–ƒç™¼å…‰ï¼',
      'å•Šï¼Œåˆä¸€ä½è¿½æ±‚ç¨‹å¼ç¢¼å“è³ªçš„å­¸å¾’ã€‚å¾ˆå¥½ï¼Œå¾ˆå¥½ã€‚',
      'å¥½çš„ç¨‹å¼ç¢¼å°±åƒå¥½çš„å·¥è—å“â€”â€”éœ€è¦æ™‚é–“å’ŒæŠ€å·§ä¾†é›•ç¢ã€‚',
    ],
    encouragements: [
      'ä½ çš„ç¨‹å¼ç¢¼è¶Šä¾†è¶Šæ•´æ½”äº†ï¼ç¹¼çºŒä¿æŒã€‚',
      'ä¸éŒ¯ï¼ä½ é–‹å§‹æœ‰å·¥åŒ çš„çœ¼å…‰äº†ã€‚',
      'æ¯ä¸€æ¬¡é‡æ§‹éƒ½æ˜¯ä¸€æ¬¡é€²æ­¥ã€‚åšå¾—å¥½ï¼',
      'ä½ æ­£åœ¨æˆç‚ºä¸€ä½çœŸæ­£çš„ç¨‹å¼ç¢¼è—è¡“å®¶ã€‚',
    ],
    hints: [
      'å¦‚æœä½ éœ€è¦è§£é‡‹é€™æ®µç¨‹å¼ç¢¼åšä»€éº¼ï¼Œé‚£å®ƒå¯èƒ½éœ€è¦é‡æ§‹ã€‚',
      'ä¸€å€‹å‡½å¼æ‡‰è©²åªåšä¸€ä»¶äº‹ï¼Œè€Œä¸”æŠŠå®ƒåšå¥½ã€‚',
      'å¥½çš„å‘½åå‹éä»»ä½•è¨»è§£ã€‚è®“ç¨‹å¼ç¢¼è‡ªå·±èªªè©±ã€‚',
      'é‡è¤‡æ˜¯è¬æƒ¡ä¹‹æºã€‚çœ‹åˆ°é‡è¤‡å°±è¦æƒ³è¾¦æ³•æŠ½è±¡ã€‚',
    ],
    unlockCondition: 'cc-3-3',
    color: 'bg-blue-600',
  },
  {
    id: 'npc-debug-sage',
    name: 'Debug ä»™äºº',
    title: 'é™¤éŒ¯ç•Œçš„å‚³å¥‡',
    description:
      'ä¸€ä½åœ¨ç„¡æ•¸ bug ä¸­æ‚Ÿé“çš„ä»™äººã€‚å®ƒèƒ½çœ‹ç©¿ä»»ä½•éŒ¯èª¤çš„æœ¬è³ªï¼Œæ•™ä½ é™¤éŒ¯çš„æœ€é«˜å¿ƒæ³•ï¼',
    avatar: 'ğŸ§˜',
    specialty: 'é™¤éŒ¯èˆ‡å•é¡Œæ’æŸ¥',
    personality: 'å†·éœã€ç¿æ™ºã€æœ‰å¹½é»˜æ„Ÿ',
    greetings: [
      'å¹´è¼•äººï¼Œbug ä¸æ˜¯æ•µäººï¼Œè€Œæ˜¯è®“ä½ æˆé•·çš„è€å¸«ã€‚',
      'æ­¡è¿ã€‚è®“æˆ‘å€‘ä¸€èµ·é¢å°é€™äº›éŒ¯èª¤ï¼Œå¾ä¸­å­¸ç¿’æ™ºæ…§ã€‚',
      'å•Šï¼Œåˆä¾†äº†ä¸€ä½å°‹æ±‚çœŸç›¸çš„äººã€‚ä¾†ï¼Œè®“æˆ‘å€‘æ‰¾å‡ºå•é¡Œçš„æ ¹æºã€‚',
    ],
    encouragements: [
      'å¾ˆå¥½ï¼Œä½ å­¸æœƒäº†è§€å¯ŸéŒ¯èª¤è¨Šæ¯ã€‚é€™æ˜¯é™¤éŒ¯çš„ç¬¬ä¸€æ­¥ã€‚',
      'å„ªç§€ï¼ä½ é–‹å§‹èƒ½å¤ é è¦‹å•é¡Œäº†ã€‚',
      'è¨˜ä½é€™æ¬¡ç¶“é©—ã€‚åŒæ¨£çš„éŒ¯èª¤ä¸æ‡‰è©²çŠ¯ç¬¬äºŒæ¬¡ã€‚',
      'æ¯è§£æ±ºä¸€å€‹ bugï¼Œä½ å°±è®Šå¾—æ›´å¼·ã€‚',
    ],
    hints: [
      'éŒ¯èª¤è¨Šæ¯æ˜¯ä½ æœ€å¥½çš„æœ‹å‹ã€‚ä»”ç´°é–±è®€å®ƒã€‚',
      'å•è‡ªå·±ï¼šä»€éº¼æ”¹è®Šäº†ï¼Ÿå¾é‚£è£¡é–‹å§‹èª¿æŸ¥ã€‚',
      'æœ‰æ™‚å€™ï¼Œæœ€å¥½çš„é™¤éŒ¯æ–¹å¼æ˜¯å¥½å¥½ç¡ä¸€è¦ºã€‚',
      'å¦‚æœæ‰¾ä¸åˆ° bugï¼Œè©¦è‘—å‘æ©¡çš®é´¨è§£é‡‹ä½ çš„ç¨‹å¼ç¢¼ã€‚',
      'console.log æ˜¯å¤è€è€Œæœ‰æ•ˆçš„é™¤éŒ¯æ³•è¡“ã€‚',
    ],
    unlockCondition: 'cc-4-3',
    color: 'bg-red-600',
  },
  {
    id: 'npc-project-master',
    name: 'å°ˆæ¡ˆå¤§å¸«',
    title: 'å…¨ç«¯é–‹ç™¼å‚³å¥‡',
    description:
      'æ›¾ç¶“å®Œæˆéç„¡æ•¸å°ˆæ¡ˆçš„å¤§å¸«ã€‚å®ƒæœƒæ•™ä½ å¦‚ä½•å¾é›¶é–‹å§‹è¦åŠƒä¸¦å®Œæˆä¸€å€‹å®Œæ•´çš„å°ˆæ¡ˆï¼',
    avatar: 'ğŸ‘¨â€ğŸ’»',
    specialty: 'å°ˆæ¡ˆè¦åŠƒèˆ‡é–‹ç™¼',
    personality: 'æœ‰é è¦‹ã€å‹™å¯¦ã€å–„æ–¼æºé€š',
    greetings: [
      'æº–å‚™å¥½æŒ‘æˆ°çœŸæ­£çš„å°ˆæ¡ˆäº†å—ï¼Ÿè®“æˆ‘å€‘é–‹å§‹å§ï¼',
      'æ­¡è¿ï¼ä»Šå¤©æˆ‘å€‘è¦æŠŠä½ æ‰€å­¸çš„ä¸€åˆ‡æ•´åˆèµ·ä¾†ã€‚',
      'ä¸€å€‹å¥½çš„å°ˆæ¡ˆå¾å¥½çš„è¦åŠƒé–‹å§‹ã€‚è®“æˆ‘ä¾†æŒ‡å°ä½ ã€‚',
    ],
    encouragements: [
      'ä½ çš„å°ˆæ¡ˆè¦åŠƒèƒ½åŠ›è¶Šä¾†è¶Šå¼·äº†ï¼',
      'å¤ªæ£’äº†ï¼ä½ æ­£åœ¨æˆç‚ºä¸€ä½çœŸæ­£çš„é–‹ç™¼è€…ã€‚',
      'å®Œæˆä¸€å€‹å°ˆæ¡ˆçš„æ„Ÿè¦ºå¾ˆæ£’å§ï¼Ÿé€™å°±æ˜¯æˆå°±æ„Ÿï¼',
      'æ¯ä¸€å€‹å°ˆæ¡ˆéƒ½æ˜¯ä½ æˆé•·çš„è¦‹è­‰ã€‚',
    ],
    hints: [
      'å…ˆåš MVPï¼ˆæœ€å°å¯è¡Œç”¢å“ï¼‰ï¼Œå†é€æ­¥æ“´å±•ã€‚',
      'ä¸è¦è¿½æ±‚å®Œç¾ã€‚å®Œæˆæ¯”å®Œç¾æ›´é‡è¦ã€‚',
      'æŠŠå¤§å•é¡Œæ‹†æˆå°å•é¡Œï¼Œä¸€å€‹ä¸€å€‹è§£æ±ºã€‚',
      'å®šæœŸæ¸¬è©¦ã€‚è¶Šæ—©ç™¼ç¾å•é¡Œï¼Œä¿®å¾©æˆæœ¬è¶Šä½ã€‚',
      'å¯«ç¨‹å¼ç¢¼å‰ï¼Œå…ˆæƒ³æ¸…æ¥šè³‡æ–™çµæ§‹ã€‚',
    ],
    unlockCondition: 'cc-5-3',
    color: 'bg-green-600',
  },
]

// å–å¾— NPC
export const getNPCById = (id: string): NPCCharacter | undefined => {
  return npcCharacters.find(npc => npc.id === id)
}

// å–å¾—éš¨æ©Ÿå•å€™èª
export const getRandomGreeting = (npcId: string): string => {
  const npc = getNPCById(npcId)
  if (!npc) return 'ä½ å¥½ï¼'
  return npc.greetings[Math.floor(Math.random() * npc.greetings.length)]
}

// å–å¾—éš¨æ©Ÿé¼“å‹µèª
export const getRandomEncouragement = (npcId: string): string => {
  const npc = getNPCById(npcId)
  if (!npc) return 'åšå¾—å¥½ï¼'
  return npc.encouragements[
    Math.floor(Math.random() * npc.encouragements.length)
  ]
}

// å–å¾—éš¨æ©Ÿæç¤º
export const getRandomHint = (npcId: string): string => {
  const npc = getNPCById(npcId)
  if (!npc) return 'è©¦è©¦çœ‹å§ï¼'
  return npc.hints[Math.floor(Math.random() * npc.hints.length)]
}

// å–å¾—æ‰€æœ‰å¯è§£é–çš„ NPC
export const getUnlockableNPCs = (): NPCCharacter[] => {
  return npcCharacters.filter(npc => npc.unlockCondition)
}

// æª¢æŸ¥ NPC æ˜¯å¦å·²è§£é–
export const isNPCUnlocked = (
  npcId: string,
  completedScenes: string[]
): boolean => {
  const npc = getNPCById(npcId)
  if (!npc) return false
  if (!npc.unlockCondition) return true // æ²’æœ‰è§£é–æ¢ä»¶å‰‡é è¨­è§£é–
  return completedScenes.includes(npc.unlockCondition)
}
